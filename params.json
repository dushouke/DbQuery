{"name":"DbQuery","tagline":"A simple .net orm","body":"# Get Start\r\n\r\n DbQuery is a another mini .net orm,it uses esay and performance is not bad.\r\n It support C# 3.0+\r\n\r\n## ExecuteScalar\r\n\r\n    SQlDbQuery.Current.ExecuteScalar<int>(connStr, \r\n                                      \"select id from dbo.Down where id = @id\",new { ID = 3220 });\r\n\r\ninsert a value and return last id\r\n\r\n\tSQlDbQuery.Current.ExecuteScalar<int>(connStr, \r\n            \"insert into dbo.Down(UserName,CreateTime) values (@Name,@Time);\" + SQlDbQuery.LastInsertIDSql,new { Name = \"Test\", Time = DateTime.Now }); \r\n\r\n## ExecuteQuery\r\n\r\nget a simple type list\r\n\r\n\t SQlDbQuery.Current.ExecuteQuery<int>(connStr, \"select id from dbo.Down where id = @id\", \r\n\t\t                                                              new ExecuteQueryOptional      { Parameters = new { ID = 3220 } });\r\n\r\n\r\nauto map to a complex type list\r\n\r\n    public class DownInfo\r\n    {\r\n        public int SysNo { get; set; }\r\n        public string UserName { get; private set; }\r\n        public DateTime CreateTime { get; set; }\r\n    }\r\n<br/>\r\n\r\n\t  SQlDbQuery.Current.ExecuteQuery<DownInfo>(connStr, \"select * from dbo.Down where id in (@ID)\",\r\n\t\t\t                                                                       new    ExecuteQueryOptional { Parameters = new { ID = new[] { 3220, 3222,3223 } } });\r\n\r\n\r\ncustomer mapping\r\n\r\n\tSQlDbQuery.Current.ExecuteQuery<DownInfo>(connStr, \"select * from dbo.Down where id in (@ID)\",\r\n\t                                                                       new ExecuteQueryOptional\r\n\t                                                                       {\r\n\t                                                                           Parameters = new { ID = new[] { 3220, 3222, 3223 } },\r\n\t                                                                           CustomerMapping = new { SysNo = \"ID\" }//sysno use the id column\r\n\t                                                                       });\r\n\r\n\r\nmanual mapping\r\n\r\n\tSQlDbQuery.Current.ExecuteQuery<DownInfo>(connStr, \"select * from dbo.Down where id in (@ID)\",\r\n\t                                                                    new ExecuteQueryOptional<DownInfo>\r\n\t                                                                    {\r\n\t                                                                        Parameters = new { ID = new[] { 3220, 3222, 3223 } },\r\n\t                                                                        ReaderFunc = dr => new DownInfo\r\n\t                                                                                            {\r\n\t                                                                                                SysNo = dr.Get<int>(\"ID\"),\r\n\t                                                                                                CreateTime = dr.Get<DateTime>(\"createtime\")\r\n\t                                                                                            }\r\n\t                                                                    });\r\n\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}